<body>
  <nav class="nav-bar">
    <div class="nav-brand" (click)="navigateTo('home')">
      <i class="bi bi-shield-lock-fill"></i>
      <span>PassTheKey</span>
    </div>
    
    <!-- Hamburger Button -->
    <button class="hamburger" (click)="toggleMobileMenu()">
      <i class="bi bi-list"></i>
    </button>
    
    <!-- Navigation Menu -->
    <div class="nav-menu" [class.active]="isMobileMenuOpen">
      <!-- Botón Inicio -->
      <button (click)="navigateTo('home')" [class.active]="currentRoute === '/home'">
        <i class="bi bi-house"></i>
        <span>Inicio</span>
      </button>

      <!-- Desktop Dropdowns (solo visible en desktop) -->
      <div *ngIf="!isLoggedIn" class="dropdown desktop-only">
        <button class="dropdown-toggle" (click)="toggleDropdown()" 
                [class.active]="currentRoute === '/auth' || currentRoute === '/register'">
          <i class="bi bi-person"></i> 
          <span>Iniciar Sesión / Registrarse</span>
          <i class="bi bi-caret-down-fill"></i>
        </button>
        <div class="dropdown-menu" [class.show]="isDropdownOpen">
          <button (click)="navigateTo('auth')" [class.active]="currentRoute === '/auth'">
            <i class="bi bi-box-arrow-in-right"></i> Iniciar Sesión
          </button>
          <button (click)="navigateTo('register')" [class.active]="currentRoute === '/register'">
            <i class="bi bi-person-plus"></i> Registrarse
          </button>
        </div>
      </div>
      
      <div *ngIf="isLoggedIn" class="dropdown desktop-only">
        <button class="dropdown-toggle" (click)="toggleDropdown()" 
                [class.active]="currentRoute === '/profile' || currentRoute === '/security'">
          <i class="bi bi-person"></i> 
          <span>Perfil</span>
          <i class="bi bi-caret-down-fill"></i>
        </button>
        <div class="dropdown-menu" [class.show]="isDropdownOpen">
          <button (click)="navigateTo('profile')" [class.active]="currentRoute === '/profile'">
            <i class="bi bi-person-badge"></i> Perfil
          </button>
          <button (click)="navigateTo('security')" [class.active]="currentRoute === '/security'">
            <i class="bi bi-shield-lock"></i> Ajustes
          </button>
        </div>
      </div>

      <!-- Mobile Only Buttons (solo visible en móvil) -->
      <button *ngIf="!isLoggedIn" class="mobile-only" (click)="navigateTo('auth')" [class.active]="currentRoute === '/auth'">
        <i class="bi bi-box-arrow-in-right"></i>
        <span>Iniciar Sesión</span>
      </button>
      <button *ngIf="!isLoggedIn" class="mobile-only" (click)="navigateTo('register')" [class.active]="currentRoute === '/register'">
        <i class="bi bi-person-plus"></i>
        <span>Registrarse</span>
      </button>
      
      <button *ngIf="isLoggedIn" class="mobile-only" (click)="navigateTo('profile')" [class.active]="currentRoute === '/profile'">
        <i class="bi bi-person-badge"></i>
        <span>Perfil</span>
      </button>
      <button *ngIf="isLoggedIn" class="mobile-only" (click)="navigateTo('security')" [class.active]="currentRoute === '/security'">
        <i class="bi bi-shield-lock"></i>
        <span>Ajustes</span>
      </button>
      
      <!-- Botón Logout (se muestra en ambas vistas) -->
      <button *ngIf="isLoggedIn" class="logout" (click)="logout()">
        <i class="bi bi-person-x-fill"></i>
        <span>Cerrar Sesión</span>
      </button>
    </div>
  </nav>
  <router-outlet></router-outlet>
</body>